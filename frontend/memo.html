<div style="margin: 0; padding: 0;">
  <style>
    #write, #read {
      margin-bottom: 20px;
    }
    textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      box-sizing: border-box;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    #saved-notes {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>메모장</h1>
  <div id="write">
    <h2>메모 작성</h2>
    <textarea id="note-content" placeholder="여기에 메모를 작성하세요..."></textarea>
    <button style="margin: 20 0 0 0;" onclick="saveNote()">저장</button>
  </div>
  <div id="read">
    <h2>저장된 메모</h2>
    <div id="saved-notes"></div>
  </div>
  <script>
    const API_KEY = "$2a$10$r46IyvSambW8Qwk889KeSOGHTKCuOxQMGJROZoMWQ7kfxjtT0TwRm";
    const BIN_ID = "668b8b70e41b4d34e40ebaeb";

    async function saveNote() {
      const noteContent = document.getElementById('note-content').value;
      if (noteContent.trim() === '') {
        alert('메모를 입력하세요.');
        return;
      }

      const notes = JSON.parse(await getData()) || [];
      notes.push(noteContent);
      saveData(JSON.stringify(notes));
      document.getElementById('note-content').value = '';
      displayNotes();
    }

    async function displayNotes() {
      const notes = JSON.parse(await getData()) || [];
      const savedNotesDiv = document.getElementById('saved-notes');
      savedNotesDiv.innerHTML = '';

      if (notes.length === 0) {
        savedNotesDiv.innerHTML = '<p>저장된 메모가 없습니다.</p>';
      } else {
        notes.forEach((note, index) => {
          const noteDiv = document.createElement('div');
          noteDiv.style.border = '1px solid #ccc';
          noteDiv.style.padding = '10px';
          noteDiv.style.marginBottom = '10px';
          noteDiv.innerText = note;

          const deleteButton = document.createElement('button');
          deleteButton.innerText = '삭제';
          deleteButton.style.marginTop = '10px';
          deleteButton.style.marginLeft = '20px';
          deleteButton.onclick = () => deleteNote(index);

          noteDiv.appendChild(deleteButton);
          savedNotesDiv.appendChild(noteDiv);
        });
      }
    }

    async function deleteNote(index) {
      const notes = await JSON.parse(getData()) || [];
      notes.splice(index, 1);
      saveData(JSON.stringify(notes));
      displayNotes();
    }

    window.onload = displayNotes;

    async function saveData(data) {
      return fetch("https://api.jsonbin.io/v3/b", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-Master-Key": API_KEY,
        },
        body: data,
      })
        .then((response) => response.json())
        .then((json) => {
          JSON.stringify(
            json,
            null,
            2
          );
        })
        .catch((error) => console.error("Error:", error));
    }

    async function getData() {
      return fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
        headers: {
          "X-Master-Key": API_KEY,
        },
      })
        .then((response) => response.json())
        .then((json) => {
          JSON.stringify(
            json.record,
            null,
            2
          );
        })
        .catch((error) => console.error("Error:", error));
    }
  </script>
</div>