<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- 스타일 -->
    <link rel="stylesheet" href="../css/style.css"/>
    <link rel="stylesheet" href="../css/navbar.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">

    <!-- 라이브러리 -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="../css/flip/flip.min.css" />

    <!-- 이벤트 등록부분 -->
    <script type="text/javascript" src="../elements/prototype.js"></script>
    <script type="text/javascript" src="../elements/gridElement.js"></script>
    <script type="text/javascript" src="../elements/modal.js"></script>
    <script type="text/javascript" src="../elements/dateSelector.js"></script>
    <script type="text/javascript" src="../elements/inputElement.js"></script>
    <script type="text/javascript" src="../elements/diceElement.js"></script>

    <!-- 함수들 -->
    <script defer type="text/javascript" src="../js/calendar.js"></script>
    <script defer type="text/javascript" src="../js/tools.js"></script>
    <script defer type="text/javascript" src="../js/excel.js"></script>
    <script defer type="text/javascript" src="../js/memo.js"></script>
    <script defer type="text/javascript" src="../js/jsonBIN.js"></script>
    <script defer type="text/javascript" src="../js/pokemon.js"></script>
    <script defer type="text/javascript" src="../js/coding.js"></script>
    <script defer type="text/javascript" src="../js/runner.js"></script>
    <title>공부용, 취미용, 심심풀이용 사이트</title>
  </head>
  <body>
    <div class="modal">
      <div class="modal_body">
        <div class="modal_content">
          모달컨텐츠
        </div>
        <div class="modal_close">
          <button class="btn_close_modal" onclick="Modal.hideModal()">close</button>
        </div>
      </div>
    </div>
    <div id="app_body" style="margin: auto; text-align: center;">
      <!-- <custom-grid row="2" col="3">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
        <div>5</div>
        <div>6</div>
      </custom-grid>
      <div style="background-color: antiquewhite; height: 500px;">

      </div> -->

      <h1>친치로</h1>
  <div>
    <div id="dice_money">총 금액 : <span>10000</span>원</div>
    <div id="bet_money">베팅 금액 : <input type="number" value="1000"></input>원</div>
    <dice-element class = "dice" style="margin: 20px; display: inline-block;"></dice-element>
    <dice-element class = "dice" style="margin: 20px; display: inline-block;"></dice-element>
    <dice-element class = "dice" style="margin: 20px; display: inline-block;"></dice-element>
    <button style="display: block; margin: 30px auto; font-size: 40px;" onclick="roll()">굴려</button>
  </div>

      <div id="value">010-0000-0000</div>
      <input type="range" min="1000000000" max="1099999999" step="1" value="1000000000">
      <!-- <date-calendar></date-calendar> -->
    </div>


</div>
    </div>
    <script>
      function callback(value){
        console.warn(value)
      }
      onload = () => {
        document.getElementsByTagName('input')[0].addEventListener('input', (e) => {
          const value = (e.target.value).toString();
          document.getElementById("value").innerText = "0" + value.slice(0, 2) + '-' + value.slice(2, 6) + '-' + value.slice(6);
        })
      }

      function roll(){
        const totalmoney = document.getElementById('dice_money').querySelector('span')
        const betMoney = document.getElementById('bet_money').querySelector('input')

        let cnt = 3;
        const values = [0,0,0];
        let idx = 0
        Array.from(document.getElementsByClassName('dice')).map(dice => dice.rollDice((value) => {
          values[idx++] = value;
          console.log('구름' + values.join(" "))
          if (!values.includes(0)){
            console.log('다구름')
            values.sort();
            
            switch (values) {
              case [1,2,3]:
                // 히후미 2배 뺏김
                totalmoney.innerText = parseInt(totalmoney.innerText) - (parseInt(betMoney.value) * 2);
                break;
              case [1,1,1]:
                // 핀조로 5배
                totalmoney.innerText = parseInt(totalmoney.innerText) + (parseInt(betMoney.value) * 5);
                break;
              case [2,2,2]:
              case [3,3,3]:
              case [4,4,4]:
              case [5,5,5]:
              case [6,6,6]:
                // 아라시 3배
                totalmoney.innerText = parseInt(totalmoney.innerText) + (parseInt(betMoney.value) * 3);
                break;
              case [4,5,6]:
                // 시고로 2배
                totalmoney.innerText = parseInt(totalmoney.innerText) + (parseInt(betMoney.value) * 2);
                break;
              default:
                if (hasEye(values)){
                  // 눈 있음
                  const eye = getEye(values)
                  MyToast.showToast("당신의 눈: " + eye.toString())
                } else {
                  // 눈 없음 다시 돌리기
                  MyToast.showToast("눈 없음 다시!")
                  cnt--;
                  if (cnt > 0) roll();
                }
            }
          }
        }))
      }

      function hasEye(arr){
        return arr[0] == arr[1] || arr[1] == arr[2] || arr[2] == arr[0];
      }

      function getEye(arr){
        if (arr[0] == arr[1]) {
          return arr[2]
        } else if (arr[1] == arr[2]){
          return arr[0]
        }
        return arr[1]
      }
      
    </script>
  </body>
</html>